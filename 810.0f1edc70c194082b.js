"use strict";(self.webpackChunkrequests_http=self.webpackChunkrequests_http||[]).push([[810],{2810:(ut,h,i)=>{i.r(h),i.d(h,{CursosModule:()=>it});var a=i(433),m=i(6895),t=i(1571),v=i(2340),C=i(4986),q=i(7272),c=i(5698),I=i(4482),S=i(5403),N=i(5032),F=i(9718),L=i(5577);function g(o,n){return n?e=>(0,q.z)(n.pipe((0,c.q)(1),function R(){return(0,I.e)((o,n)=>{o.subscribe((0,S.x)(n,N.Z))})}()),e.pipe(g(o))):(0,L.z)((e,r)=>o(e,r).pipe((0,c.q)(1),(0,F.h)(e)))}var E=i(9751),k=i(3532);function _(o,n=C.z){const e=function J(o=0,n,e=C.P){let r=-1;return null!=n&&((0,k.K)(n)?e=n:r=n),new E.y(s=>{let u=function Y(o){return o instanceof Date&&!isNaN(o)}(o)?+o-e.now():o;u<0&&(u=0);let l=0;return e.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(o,n);return g(()=>e)}var Z=i(8505),U=i(529);let A=(()=>{class o extends class D{constructor(n,e){this.http=n,this.API_URL=e}list(){return this.http.get(this.API_URL).pipe(_(1e3),(0,Z.b)(console.log))}loadById(n){return this.http.get(`${this.API_URL}/${n}`).pipe((0,c.q)(1))}create(n){return this.http.post(this.API_URL,n).pipe((0,c.q)(1))}update(n){return this.http.put(`${this.API_URL}/${n.id}`,n).pipe((0,c.q)(1))}save(n){return n.id?this.update(n):this.create(n)}remove(n){return this.http.delete(`${this.API_URL}/${n}`).pipe((0,c.q)(1))}}{constructor(e){super(e,`${v.N.API}cursos`),this.http=e}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(U.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=i(6937);let $=(()=>{class o{constructor(e){this.bsModalRef=e,this.type="success",this.message=""}ngOnInit(){}onClose(){this.bsModalRef.hide()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.UZ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-alert-modal"]],inputs:{type:"type",message:"message"},decls:5,vars:4,consts:[["role","alert"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.TgZ(2,"button",1),t.NdJ("click",function(){return r.onClose()}),t.TgZ(3,"span",2),t._uU(4,"\xd7"),t.qZA()()()),2&e&&(t.Gre("alert alert-",r.type," no-margin "),t.xp6(1),t.hij(" ",r.message," "))},styles:[".no-margin[_ngcontent-%COMP%]{margin-bottom:0}"]}),o})();var b=i(7579);let G=(()=>{class o{constructor(e){this.bsModalRef=e,this.title="",this.msg="",this.cancelTxt="Cancelar",this.okTxt="Sim"}ngOnInit(){this.confirmResult=new b.x}onClose(){this.confirmAndClose(!1)}onConfirm(){this.confirmAndClose(!0)}confirmAndClose(e){this.confirmResult.next(e),this.bsModalRef.hide()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.UZ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-modal"]],inputs:{title:"title",msg:"msg",cancelTxt:"cancelTxt",okTxt:"okTxt"},decls:15,vars:4,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3)(5,"span",4),t._uU(6,"\xd7"),t.qZA()()(),t.TgZ(7,"div",5)(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"div",6)(11,"button",7),t.NdJ("click",function(){return r.onClose()}),t._uU(12),t.qZA(),t.TgZ(13,"button",8),t.NdJ("click",function(){return r.onConfirm()}),t._uU(14),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(r.title),t.xp6(6),t.Oqu(r.msg),t.xp6(3),t.Oqu(r.cancelTxt),t.xp6(2),t.Oqu(r.okTxt))}}),o})();var p=(()=>{return(o=p||(p={})).DANGER="danger",o.SUCCESS="success",p;var o})();let T=(()=>{class o{constructor(e){this.modalService=e}showAlert(e,r,s){const u=this.modalService.show($);u.content.type=r,u.content.message=e,s&&setTimeout(()=>u.hide(),s)}showAlertDanger(e){this.showAlert(e,p.DANGER)}showAlertSuccess(e){this.showAlert(e,p.SUCCESS,3e3)}showConfirm(e,r,s,u){const l=this.modalService.show(G);return l.content.title=e,l.content.msg=r,s&&(l.content.okTxt=s),u&&(l.content.cancelTxt=u),l.content.confirmResult}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.tT))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var d=i(4556);function O(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1," Digite o Nome "),t.qZA())}function w(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1," No m\xednimo 3 caracteres "),t.qZA())}function P(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1," No M\xe1ximo 250 caracteres "),t.qZA())}function z(o,n){if(1&o&&(t.TgZ(0,"div",9),t.YNc(1,O,2,0,"div",10),t.YNc(2,w,2,0,"div",10),t.YNc(3,P,2,0,"div",10),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.form.controls.nome.errors?null:e.form.controls.nome.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.nome.errors?null:e.form.controls.nome.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.errors?null:e.form.controls.errors.maxlength)}}const Q=function(o){return{"is-invalid":o}};let y=(()=>{class o{constructor(e,r,s,u,l){this.fb=e,this.service=r,this.modal=s,this.location=u,this.route=l,this.submitted=!1}ngOnInit(){const e=this.route.snapshot.data.curso;this.form=this.fb.group({id:[e.id],nome:[e.nome,[a.kI.required,a.kI.minLength(3),a.kI.maxLength(250)]]})}hasError(e){return this.form.get(e)?.errors}onSubmit(){if(this.submitted=!0,this.form.valid){let e="Curso criado com sucesso!",r="Erro ao criar curso, tente novamente!";this.form.value.id&&(e="Curso editado com sucesso!",r="Erro ao editar curso, tente novamente!"),this.service.save(this.form.value).subscribe(s=>{this.modal.showAlertSuccess(e),this.location.back()},s=>this.modal.showAlertDanger(r))}}onCancel(){this.submitted=!1,this.form.reset()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(A),t.Y36(T),t.Y36(m.Ye),t.Y36(d.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cursos-form"]],decls:12,vars:5,consts:[["novalidate","",1,"needs-validation",2,"padding-top","10px",3,"formGroup"],[1,"form-row"],[1,"col-sm-12"],["for","nome"],["type","text","id","nome","placeholder","Nome do Curso","formControlName","nome",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[2,"margin-top","10px"],["type","sumit",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,r){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"Nome do Curso"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,z,4,3,"div",5),t.qZA()(),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return r.onSubmit()}),t._uU(9,"Salvar"),t.qZA(),t.TgZ(10,"button",8),t.NdJ("click",function(){return r.onCancel()}),t._uU(11,"Cancelar"),t.qZA()()()),2&e&&(t.Q6J("formGroup",r.form),t.xp6(5),t.Q6J("ngClass",t.VKq(3,Q,r.submitted&&r.hasError("nome"))),t.xp6(1),t.Q6J("ngIf",r.hasError("nome")))},dependencies:[m.mk,m.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]}),o})();var j=i(262),M=i(515),B=i(3900);const K=["deleteModal"];function H(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t._uU(1,"\n          "),t.TgZ(2,"td"),t._uU(3),t.qZA(),t._uU(4,"\n          "),t.TgZ(5,"td"),t._uU(6),t.qZA(),t._uU(7,"\n          "),t.TgZ(8,"td"),t._uU(9,"\n            "),t.TgZ(10,"span",3),t._uU(11,"\n              "),t.TgZ(12,"button",12),t.NdJ("click",function(){const u=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onEdit(u.id))}),t._uU(13,"Editar"),t.qZA(),t._uU(14,"\n\n              "),t.TgZ(15,"button",13),t.NdJ("click",function(){const u=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onDelete(u))}),t._uU(16,"Remover"),t.qZA(),t._uU(17,"\n            "),t.qZA(),t._uU(18,"\n          "),t.qZA(),t._uU(19,"\n        "),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(3),t.Oqu(e.id),t.xp6(3),t.Oqu(e.nome)}}function X(o,n){if(1&o&&(t.TgZ(0,"table",10),t._uU(1,"\n      "),t.TgZ(2,"thead"),t._uU(3,"\n        "),t.TgZ(4,"tr"),t._uU(5,"\n          "),t.TgZ(6,"th"),t._uU(7,"#"),t.qZA(),t._uU(8,"\n          "),t.TgZ(9,"th"),t._uU(10,"Curso"),t.qZA(),t._uU(11,"\n          "),t._UZ(12,"th"),t._uU(13,"\n        "),t.qZA(),t._uU(14,"\n      "),t.qZA(),t._uU(15,"\n      "),t.TgZ(16,"tbody"),t._uU(17,"\n        "),t.YNc(18,H,20,2,"tr",11),t._uU(19,"\n      "),t.qZA(),t._uU(20,"\n    "),t.qZA()),2&o){const e=n.ngIf;t.xp6(18),t.Q6J("ngForOf",e)}}function W(o,n){1&o&&(t._uU(0,"\n      "),t.TgZ(1,"span"),t._uU(2,"Carregando Cursos..."),t.qZA(),t._uU(3,"\n    "))}function V(o,n){if(1&o){const e=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",14),t._uU(2,"\n    "),t.TgZ(3,"p"),t._uU(4,"Deseja remover esse curso?"),t.qZA(),t._uU(5,"\n    "),t.TgZ(6,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onConfirmDelete())}),t._uU(7,"Sim"),t.qZA(),t._uU(8,"\n    "),t.TgZ(9,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onDeclineDelete())}),t._uU(10,"N\xe3o"),t.qZA(),t._uU(11,"\n  "),t.qZA(),t._uU(12,"\n")}}const tt=function(){return["novo"]};let et=(()=>{class o{constructor(e,r,s,u,l){this.service=e,this.alertService=r,this.router=s,this.route=u,this.modalService=l,this.error$=new b.x}ngOnInit(){this.onRefresh()}onRefresh(){this.cursos$=this.service.list().pipe((0,j.K)(e=>(console.error(e),this.handleError(),M.E)))}handleError(){this.alertService.showAlertDanger("Erro ao carregar cursos. Tente novamente mais tarde.")}onEdit(e){this.router.navigate(["editar",e],{relativeTo:this.route})}onDelete(e){this.cursoSelecionado=e,this.alertService.showConfirm("Confirma\xe7\xe3o","Tem certeza que deseja remover esse curso?").asObservable().pipe((0,c.q)(1),(0,B.w)(s=>s?this.service.remove(e.id):M.E)).subscribe(s=>{this.onRefresh()},s=>{this.alertService.showAlertDanger("Erro ao remover curso. Tente novamente mais tarde.")})}onConfirmDelete(){this.service.remove(this.cursoSelecionado.id).subscribe(e=>{this.onRefresh(),this.deleteModalRef.hide()},e=>{this.alertService.showAlertDanger("Erro ao remover curso. Tente novamente mais tarde."),this.deleteModalRef.hide()})}onDeclineDelete(){this.deleteModalRef.hide()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A),t.Y36(T),t.Y36(d.F0),t.Y36(d.gz),t.Y36(f.tT))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cursos-lista"]],viewQuery:function(e,r){if(1&e&&t.Gf(K,5),2&e){let s;t.iGM(s=t.CRH())&&(r.deleteModal=s.first)}},decls:33,vars:6,consts:[[1,"card","mt-3"],[1,"card-header"],[1,"float-left"],[1,"float-right"],["type","button",1,"btn","btn-primary",3,"routerLink"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"card-body"],["class","table table-hover",4,"ngIf","ngIfElse"],["loading",""],["deleteModal",""],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-warning","mb-1","btn-sm",3,"click"],[1,"btn","btn-outline-danger","mb-1","btn-sm",3,"click"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n  "),t.TgZ(2,"div",1),t._uU(3,"\n    "),t.TgZ(4,"div",2),t._uU(5,"\n      "),t.TgZ(6,"h4"),t._uU(7,"Cursos"),t.qZA(),t._uU(8,"\n    "),t.qZA(),t._uU(9,"\n    "),t.TgZ(10,"div",3),t._uU(11,"\n      "),t.TgZ(12,"button",4),t._uU(13,"Novo Curso"),t.qZA(),t._uU(14,"\n      "),t.TgZ(15,"button",5),t.NdJ("click",function(){return r.onRefresh()}),t._uU(16,"Atualizar"),t.qZA(),t._uU(17,"\n    "),t.qZA(),t._uU(18,"\n  "),t.qZA(),t._uU(19,"\n  "),t.TgZ(20,"div",6),t._uU(21,"\n    "),t.YNc(22,X,21,1,"table",7),t.ALo(23,"async"),t._uU(24,"\n    "),t.YNc(25,W,4,0,"ng-template",null,8,t.W1O),t._uU(27,"\n  "),t.qZA(),t._uU(28,"\n"),t.qZA(),t._uU(29,"\n\n\n"),t.YNc(30,V,13,0,"ng-template",null,9,t.W1O),t._uU(32,"\n")),2&e){const s=t.MAs(26);t.xp6(12),t.Q6J("routerLink",t.DdM(5,tt)),t.xp6(10),t.Q6J("ngIf",t.lcZ(23,3,r.cursos$))("ngIfElse",s)}},dependencies:[m.sg,m.O5,d.rH,m.Ov]}),o})();var ot=i(9646);let nt=(()=>{class o{constructor(e){this.http=e,this.API=`${v.N.API}cursos`}list(){return this.http.get(this.API).pipe(_(1e3),(0,Z.b)(console.log))}loadById(e){return this.http.get(`${this.API}/${e}`).pipe((0,c.q)(1))}create(e){return this.http.post(this.API,e).pipe((0,c.q)(1))}update(e){return this.http.put(`${this.API}/${e.id}`,e).pipe((0,c.q)(1))}save(e){return e.id?this.update(e):this.create(e)}remove(e){return this.http.delete(`${this.API}/${e}`).pipe((0,c.q)(1))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(U.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),x=(()=>{class o{constructor(e){this.service=e}resolve(e,r){return e.params&&e.params.id?this.service.loadById(e.params.id):(0,ot.of)({id:null,nome:null})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(nt))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const rt=[{path:"",component:et},{path:"novo",component:y,resolve:{curso:x}},{path:"editar/:id",component:y,resolve:{curso:x}}];let st=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(rt),d.Bz]}),o})(),it=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,st,a.UX,a.u5]}),o})()}}]);