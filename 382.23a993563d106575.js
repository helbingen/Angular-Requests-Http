"use strict";(self.webpackChunkrequests_http=self.webpackChunkrequests_http||[]).push([[382],{382:(E,c,s)=>{s.r(c),s.d(c,{UploadFileModule:()=>C});var m=s(6895),d=s(2340),f=s(9635),h=s(9300),U=s(4004),F=s(8505),p=s(529),e=s(1571);let g=(()=>{class o{constructor(t){this.http=t}upload(t,n){const r=new FormData;return t.forEach(i=>r.append("file",i,i.name)),this.http.post(n,r,{observe:"events",reportProgress:!0})}download(t){return this.http.get(t,{responseType:"blob"})}handleFile(t,n){const r=new Blob([t],{type:t.type}),i=window.URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=n,a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(i),a.remove()},100)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(p.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),w=(()=>{class o{constructor(t){this.service=t,this.progress=0}ngOnInit(){}onChange(t){const n=t.srcElement.files,r=[];this.files=new Set;for(let i=0;i<n.length;i++)r.push(n[i].name),this.files.add(n[i]);document.getElementById("customFileLabel").innerHTML=r.join(", "),this.progress=0}onUpload(){this.files&&this.files.size>0&&this.service.upload(this.files,d.N.BASE_URL+"/upload").pipe(function b(o){return(0,F.b)(l=>{l.type===p.dt.UploadProgress&&o(Math.round(100*l.loaded/(l.total||1)))})}(t=>{this.progress=t}),function v(){return(0,f.z)((0,h.h)(o=>o.type===p.dt.Response),(0,U.U)(o=>o.body))}()).subscribe(t=>console.log("Upload concluido"))}onDownloadExcel(){this.service.download(d.N.BASE_URL+"/downloadExcel").subscribe(t=>{this.service.handleFile(t,"report.xlsx")})}onDownloadPDF(){this.service.download(d.N.BASE_URL+"/downloadPDF").subscribe(t=>{this.service.handleFile(t,"report.pdf")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-file"]],decls:17,vars:4,consts:[[2,"margin-top","10px"],[1,"custom-file"],["type","file","id","customFile","multiple","",1,"custom-file-input",3,"change"],["for","customFile","id","customFileLabel",1,"custom-file-label"],[1,"progress"],["role","progressbar",1,"progress-bar"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"input",2),e.NdJ("change",function(i){return n.onChange(i)}),e.qZA(),e.TgZ(3,"label",3),e._uU(4,"Selecionar Arquivo"),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e._uU(7),e.qZA()()(),e.TgZ(8,"div",0)(9,"button",6),e.NdJ("click",function(){return n.onUpload()}),e._uU(10,"Upload"),e.qZA()(),e.TgZ(11,"div",0)(12,"button",7),e.NdJ("click",function(){return n.onDownloadExcel()}),e._uU(13,"Download Excel"),e.qZA()(),e.TgZ(14,"div",0)(15,"button",7),e.NdJ("click",function(){return n.onDownloadPDF()}),e._uU(16,"Download PDF"),e.qZA()()),2&t&&(e.xp6(6),e.Udp("width",n.progress+"%"),e.xp6(1),e.hij("",n.progress,"%"),e.xp6(2),e.Q6J("disabled",!n.files))}}),o})();var u=s(4556);const y=[{path:"",component:w}];let T=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(y),u.Bz]}),o})(),C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,T]}),o})()}}]);